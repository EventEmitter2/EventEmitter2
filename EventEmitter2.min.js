!function(a,b){function c(a){if(a&&a.delimiter==="*")throw new Error('The event can not be delimited by the "*" (wild-card) character.');this._delimiter=a?a.delimiter:".",this._maxListeners=a?a.maxListeners:10,this._events={}}a.EventEmitter2=c,c.prototype.addListener=function(a,b){var c,d=this._events;this.emit("newListener",a,b);if(~a.indexOf(this._delimiter)){c=a.split(this._delimiter);for(var e=0,f=c.length;e<f;e++)d=d[c[e]]||(d[c[e]]={})}else d=d[a]||(d[a]={});d._listeners&&d._listeners.length===this.maxListeners?this.emit("maxListeners",a):d._listeners?d._listeners.push(b):d._listeners=[b]},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){this.many(a,b,1)},c.prototype.many=function(a,b,c){var d=this;this.addListener(a,function(){b--==0?d.removeListener(a,c):c.apply(null,arguments)})},c.prototype.emit=function(a){function f(a){for(var b=0,d=a._listeners.length;b<d;b++)a._listeners[b].apply(this,c);return!0}var b=this,c=arguments,d=0,e=0;if(~a.indexOf(this._delimiter)){name=a.split(this._delimiter);var g=[this._events],h=!1,i=null;for(d=0;d<name.length;d++){var j=name[d],k=[];for(e=0;e<g.length;e++){var m=g[e];if(d===name.length-1)if(j==="*"){for(i in m)m.hasOwnProperty(i)&&m[i]&&m[i]._listeners&&f(m[i]);h=!0}else m[j]&&m[j]._listeners&&f(m[j])?h=!0:m["*"]&&m["*"]._listeners&&f(m["*"])&&(h=!0);else if(j!=="*"){if(!m[j]&&!m["*"])continue;m[j]?(m["*"]&&k.push(m["*"]),g[e]=g[e][j]):m["*"]&&(g[e]=g[e]["*"],m["*"]&&m["*"]._listeners&&f(m["*"])&&(h=!0))}else{for(i in m)m.hasOwnProperty(i)&&k.push(m[i]);m["*"]&&m["*"]._listeners&&f(m["*"])&&(h=!0),g.splice(e,1)}}k.length&&(g=g.concat(k))}return h}if(this._events[a]&&this._events[a]._listeners){var n=this._events[a]._listeners;for(d=0,l=n.length;d<l;d++)n[d].apply(this,c)}return!0},c.prototype.removeListener=function(a,b){if(b&&this._events[a]&&this._events[a]._listeners){var c=this._events[a]._listeners;for(var d=0,e=c.length;d<e;d++)if(b===c[d])return c.splice(d,1)}else this._events[a]={}},c.prototype.removeAllListeners=function(){this._events={}},c.prototype.setMaxListeners=function(a){this.maxListeners=a},c.prototype.listeners=function(a){return this._events[a]?this._events[a]._listeners:!1}}(typeof exports=="undefined"?window:exports)