!function(b,c){b.EventEmitter2=a;function a(d){d=d||{};if(d.delimiter==="*"){throw new Error('The event can not be delimited by the "*" (wild-card) character.')}this._caseSensitive=d.caseSensitive;this._delimiter=d.delimiter||".";this._maxListeners=d.maxListeners===0?0:d.maxListeners||10;this._events={}}a.prototype.addListener=function(h,j){var e,g=this._events;if(h[h.length-1]===this._delimiter||h[0]===this._delimiter){this.nameError()}if(this._caseSensitive===true){h=h.toLowerCase()}this.emit("newListener",h,j);if(~h.indexOf(this._delimiter)){e=h.split(this._delimiter);for(var f=0,d=e.length;f<d;f++){g=g[e[f]]||(g[e[f]]={})}}else{g=g[h]||(g[h]={})}if(g._listeners&&g._listeners.length===this.maxListeners){this.emit("maxListeners",h);return}g._listeners?g._listeners.push(j):g._listeners=[j]};a.prototype.on=a.prototype.addListener;a.prototype.once=function(d,e){this.many(d,1,e)};a.prototype.many=function(f,d,g){var e=this;this.addListener(f,function(){if(d--==0){e.removeListener(f,g)}else{g.apply(null,arguments)}})};a.prototype.emit=function(d){if(d[d.length-1]===this._delimiter||d[0]===this._delimiter){this.nameError()}var s=this,n=arguments,k=0,h=0;function m(t){for(var j=0,i=t._listeners.length;j<i;j++){t._listeners[j].apply(this,n)}return true}if(~d.indexOf(this._delimiter)||d==="*"){name=d.split(this._delimiter);var q=[this._events],g=false,r=null;for(k=0;k<name.length;k++){var f=s._caseSensitive===true?name[k].toLowerCase():name[k];var e=[];for(h=0;h<q.length;h++){var p=q[h];if(k===name.length-1){if(f==="*"){for(r in p){if(p.hasOwnProperty(r)){if(p[r]&&p[r]._listeners){m(p[r])}}}g=true}else{if(p[f]&&p[f]._listeners&&m(p[f])){g=true}else{if(p["*"]&&p["*"]._listeners&&m(p["*"])){g=true}}}}else{if(f!=="*"){if(!p[f]&&!p["*"]){continue}if(p[f]){if(p["*"]){e.push(p["*"])}q[h]=q[h][f]}else{if(p["*"]){q[h]=q[h]["*"];if(p["*"]&&p["*"]._listeners&&m(p["*"])){g=true}}}}else{for(r in p){if(p.hasOwnProperty(r)){e.push(p[r])}}if(p["*"]&&p["*"]._listeners&&m(p["*"])){g=true}q.splice(h,1)}}}if(e.length){q=q.concat(e)}}return g}else{if(this._events[d]&&this._events[d]._listeners){var o=this._events[d]._listeners;for(k=0,l=o.length;k<l;k++){o[k].apply(this,n)}}else{if(this._events["*"]&&this._events["*"]._listeners){g=m(this._events["*"])}}}return true};a.prototype.removeListener=function(g,h){if(h&&this._events[g]&&this._events[g]._listeners){var f=this._events[g]._listeners;for(var e=0,d=f.length;e<d;e++){if(h===f[e]){return f.splice(e,1)}}}else{this._events[g]={}}};a.prototype.removeAllListeners=function(){this._events={}};a.prototype.setMaxListeners=function(d){this.maxListeners=d};a.prototype.listeners=function(d){if(this._events[d]){return this._events[d]._listeners}else{return false}};a.prototype.nameError=function(){throw new Error("Name can't end or begin with the \""+this._delimiter+"\" character, it's the delimiter.")}}(typeof exports==="undefined"?window:exports);